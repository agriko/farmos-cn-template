group 'org.agriko.farmos.cn'

task publishApiToMavenLocal {
    dependsOn gradle.includedBuild('api').task(':publishToMavenLocal')
}

task publishServiceToMavenLocal {
    mustRunAfter publishApiToMavenLocal
    dependsOn gradle.includedBuild('service').task(':publishToMavenLocal')
}

task publishComponentTestToMavenLocal {
    mustRunAfter publishApiToMavenLocal
    mustRunAfter publishServiceToMavenLocal
    dependsOn gradle.includedBuild('component-test').task(':publishToMavenLocal')
}

task publishToMavenLocal {
    group 'all'
    dependsOn publishApiToMavenLocal
    dependsOn publishServiceToMavenLocal
    dependsOn publishComponentTestToMavenLocal
}

task artifactoryPublish {
    group 'all'
    dependsOn publishToMavenLocal
    dependsOn gradle.includedBuild('api').task(':artifactoryPublish')
    dependsOn gradle.includedBuild('service').task(':artifactoryPublish')
    dependsOn gradle.includedBuild('component-test').task(':artifactoryPublish')
}

task prepareForTest {
    group 'all'
    dependsOn publishToMavenLocal
    dependsOn gradle.includedBuild('component-test').task(':build')
}

task clean {
    group 'all'
    dependsOn gradle.includedBuild('api').task(':clean')
    dependsOn gradle.includedBuild('service').task(':clean')
    dependsOn gradle.includedBuild('component-test').task(':clean')
}

task licenseFormat {
    group 'all'
    dependsOn gradle.includedBuild('api').task(':licenseFormat')
    dependsOn gradle.includedBuild('service').task(':licenseFormat')
    dependsOn gradle.includedBuild('component-test').task(':licenseFormat')
}